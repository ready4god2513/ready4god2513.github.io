"use strict";var app=angular.module("vine",["ngResource","ngRoute"]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"/views/videos.html",controller:"VideoController"})}]),app.controller("VideoController",["$scope","$timeout","$location","$anchorScroll","VineService",function(a,b,c,d,e){a.videos=[],a.loading=!1,a.searchTerm="fail";var f=!1;a.searchVids=function(b){a.searchTerm?(a.loading=!0,e.get({tag:a.searchTerm,page:b},function(b){a.videos=b.data.records,a.loading=!1})):a.videos=[],d()},a.playVideo=function(a){var b=document.getElementById("player").cloneNode(!0),c=document.getElementById("vine-"+a.postId);c.innerHTML=null,c.appendChild(b),b.setAttribute("src",a.videoUrl),b.setAttribute("width","100%"),b.play(),b.addEventListener("click",function(){b.paused?b.play():b.pause()})},a.$watch("searchTerm",function(){f&&b.cancel(f),f=b(function(){a.searchVids()},250)})}]),app.factory("VineService",["$resource",function(a){return a("http://bhvine.herokuapp.com/search/:tag",{tag:"search",callback:"JSON_CALLBACK"},{get:{method:"JSONP"}})}]);